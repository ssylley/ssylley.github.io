/* --- DICCIONARIO DE TRADUCCIONES --- */
const translations = {
    es: {
        // Header
        job_title: "> Fullstack Dev & Artist _",
        
        // Sobre m칤
        sobre_mi_titulo: "Sobre m칤",
        sobre_mi_desc: "<p>춰Hola! Mi nombre es <strong>Silvia</strong>.</p>" +
                        "<p>Mi camino hacia el desarrollo de software no fue el t칤pico. " +
                        "Aunque mi primera vocaci칩n fue la veterinaria, porque me apasionan los <strong>animales</strong>, " +
                        "la influencia de mi padre inform치tico y la b칰squeda de una <strong>proyecci칩n profesional s칩lida</strong> " +
                        "me hicieron dar el salto a la tecnolog칤a. Y fue la decisi칩n correcta.</p>" +
                        "<p>Soy una desarrolladora que cree que el c칩digo no solo debe ser funcional, sino tambi칠n una <strong>obra de arte</strong>. " +
                        "Gracias a mis aficiones creativas como <strong>dibujar y editar v칤deo</strong>, tengo una sensibilidad especial para unir la " +
                        "<strong>l칩gica robusta del backend</strong> con <strong>interfaces cautivadoras</strong>.</p>" +
                        "<p>Cuando no estoy programando, me encontrar치s disfrutando de <strong>videojuegos</strong>, escuchando m칰sica o creando contenido visual. " +
                        "Esa mezcla de t칠cnica y creatividad es lo que defino como mi sello personal.</p>",

        // Proyectos
        proyectos_titulo: "Proyectos destacados",
        proyecto1_nombre: "PetBuddy - Encuentra cuidadores confiables",
        proyecto1_desc: "Prototipado funcional animado en Figma de una aplicaci칩n para m칩viles sobre mascotas. " +
                        "Esta aplicaci칩n esta pensada para poder ofrecer servicios de todo tipo a los due침os de mascotas. " +
                        "Cuenta con apartados para:",
        petbuddy_lista: "<li>B칰squeda de cuidadores</li>" +
                        "<li>Reservas y servicios</li>" +
                        "<li>Perfil de mascota</li>" +
                        "<li>Sistema de valoraciones</li>" +
                        "<li>Chat en tiempo real</li>" +
                        "<li>Gesti칩n de reservas</li>" +
                        "<li>Tienda integrada</li>" +
                        "<li>Panel de usuario</li>",

        // Trayectoria
        trayectoria_titulo: "Trayectoria",
        time_line1: "2024 - Presente",
        exp1_titulo: "Estudiante de DAM",
        exp1_lugar: "Colegio Salesiano Nuestra Se침ora del Pilar de Zaragoza",
        exp1_desc: "Estudiando el ciclo superior de desarrollo de aplicaciones multiplataforma, Java, Bases de datos..." +
                    " Participaci칩n en proyectos de desarrollo de aplicaciones, tanto individuales como en equipo, aplicando metodolog칤as "+ 
                    "치giles y buenas pr치cticas de programaci칩n.",
        time_line2: "Marzo 2025 - Junio 2025",
        exp2_titulo: "Desarrolladora web (Pr치cticas)",
        exp2_lugar: "Ayuntamiento de Veguillas de La Sierra",
        exp2_desc: "Desarrollo de una p치gina web institucional para el Ayuntamiento de Veguillas de La Sierra, utilizando HTML, Next.js y Wix. " +
                    "La web incluye informaci칩n sobre el municipio, servicios, eventos y contacto, con un dise침o moderno y responsive.",
        time_line3: "2022 - 2024",
        exp3_titulo: "Estudiante de bachillerato de ciencias de la salud",
        exp3_lugar: "I.E.S. Pilar Lorengar",
        exp3_desc: "Estudiante de bachillerato con enfoque en ciencias de la salud, desarrollando habilidades anal칤ticas y de investigaci칩n, "+ 
                    "adem치s de una base s칩lida en biolog칤a, qu칤mica y matem치ticas. Participaci칩n en proyectos cient칤ficos y " + 
                    "actividades extracurriculares relacionadas con la salud.",

        // Conocimientos
        conocimientos_titulo: "Conocimientos t칠cnicos",
        leyenda_fluido: "Fluido",
        leyenda_intermedio: "Intermedio",
        leyenda_basic: "En aprendizaje",
        
        // Cards (T칤tulos)
        card_lenguajes: "> Lenguajes y backend",
        card_front: "> Frontend y web",
        card_design: "> Dise침o y prototipado",
        card_tools: "> Herramientas y entornos",
        card_systems: "> Sistemas y redes",
        card_agile: "> Metodolog칤as 치giles",

        // Habilidades
        skills_title: "Habilidades",
        skill_logic: "Pensamiento l칩gico",
        skill_team: "Trabajo en equipo",
        skill_creative: "Creatividad",
        skill_problem: "Resoluci칩n de problemas",
        skill_learn: "Capacidad de aprendizaje",
        skill_time: "Gesti칩n del tiempo",

        // Idiomas
        idiomas_titulo: "Idiomas",
        lang_es: "Espa침ol",
        lang_en: "Ingl칠s",
        lang_es_desc: "Nativo",
        lang_en_desc: "Nivel B1",

        // Contacto
        contact_title: "Contacto",
        contact_desc: "游둯 쯊ienes un proyecto en mente o quieres colaborar? Puedes comunicarte conmigo a trav칠s de:",
        contact_linkedin_desc: "Conectemos profesionalmente",

        // Footer
        footer_text: "Hecho con 游둯 y c칩digo por Ssylley | 2026"
    },
    en: {
        // Header
        job_title: "> Fullstack Dev & Artist _",
        
        // About Me
        sobre_mi_titulo: "About me",
        sobre_mi_desc: "<p>Hello! My name is <strong>Silvia</strong></p>" +
                        "<p>My path to software development wasn't typical. " +
                        "Although my first vocation was veterinary medicine, because I am passionate about <strong>animals</strong>, " +
                        "the influence of my programming father and the search for a <strong>solid career path</strong> " +
                        "made me take the leap into technology. And it was the right decision.</p>" +
                        "<p>I am a developer who believes code shouldn't just be functional, but also a <strong>work of art</strong>. " +
                        "Thanks to my creative hobbies like <strong>drawing and video editing</strong>, I have a special sensitivity for uniting " +
                        "<strong>robust backend logic</strong> with <strong>captivating interfaces</strong>.</p>" +
                        "<p>When I'm not programming, you'll find me enjoying <strong>video games</strong>, listening to music, or creating visual content. " +
                        "That mix of technique and creativity is what I define as my personal signature.</p>",
        
        // Projects
        proyectos_titulo: "Featured projects",
        proyecto1_nombre: "PetBuddy - Find Trusted Pet Sitters",
        proyecto1_desc: "Functional animated prototype in Figma of a mobile application about pets. " +
                        "This application is designed to offer all kinds of services to pet owners. " +
                        "It includes sections for:",
        petbuddy_lista: "<li>Find sitters</li>" +
                        "<li>Bookings and services</li>" +
                        "<li>Pet profile</li>" +
                        "<li>Rating system</li>" +
                        "<li>Real-time chat</li>" +
                        "<li>Booking management</li>" +
                        "<li>Integrated store</li>" +
                        "<li>User panel</li>",
        
        // Trayectory
        trayectoria_titulo: "Trayectory",
        time_line1: "2024 - Present",
        exp1_titulo: "DAM student",
        exp1_lugar: "Salesian School Our Lady of the Pillar of Zaragoza",
        exp1_desc: "Studying the higher cycle of multiplatform application development, Java, Databases... " +
                    "Participation in application development projects, both individual and team-based, applying agile " + 
                    "methodologies and good programming practices.",
        time_line2: "March 2025 - June 2025",
        exp2_titulo: "Web developer (Practices)",
        exp2_lugar: "Veguillas de La Sierra City Council",
        exp2_desc: "Development of an institutional website for the Veguillas de La Sierra City Council, using HTML, Next.js, and Wix. " +
                    "The website includes information about the municipality, services, events, and contact, with a modern and responsive design.",
        time_line3: "2022 - 2024",
        exp3_titulo: "Health science bachelor's degree student",
        exp3_lugar: "I.E.S. Pilar Lorengar",
        exp3_desc: "Health science-focused bachelor's degree student developing analytical and research skills, " + 
                    "as well as a solid foundation in biology, chemistry, and mathematics. Participation in scientific projects and " + 
                    "extracurricular activities related to health.",
        
        // Technical
        conocimientos_titulo: "Hard skills",
        leyenda_fluido: "Fluent",
        leyenda_intermedio: "Intermediate",
        leyenda_basic: "Learning",
        
        // Cards (Titles)
        card_lenguajes: "> Languages & backend",
        card_front: "> Frontend & web",
        card_design: "> Design & prototyping",
        card_tools: "> Tools & environments",
        card_systems: "> Systems & networks",
        card_agile: "> Agile methodologies",

        // Skills
        skills_title: "Soft skills",
        skill_logic: "Logical thinking",
        skill_team: "Teamwork",
        skill_creative: "Creativity",
        skill_problem: "Problem solving",
        skill_learn: "Learning ability",
        skill_time: "Time management",

        // Languages
        idiomas_titulo: "Languages",
        lang_es: "Spanish",
        lang_en: "English",
        lang_es_desc: "Native",
        lang_en_desc: "Level B1",

        // Contact
        contact_title: "Contact",
        contact_desc: "游둯 Do you have a project in mind or want to collaborate? You can reach out to me through:",
        contact_linkedin_desc: "Let's connect professionally",

        // Footer
        footer_text: "Made with 游둯 and code by Ssylley | 2026"
    }
};

/* --- L칍GICA DEL CAMBIO DE IDIOMA --- */
const toggle = document.getElementById('toggle-lang');

function updateLanguage(lang) {
    // Selecciona todos los elementos que tengan el atributo data-translate
    const elements = document.querySelectorAll('[data-translate]');
    
    elements.forEach(el => {
        const key = el.getAttribute('data-translate');
        if (translations[lang][key]) {
            // Usamos innerHTML para mantener las negritas (<strong>)
            el.innerHTML = translations[lang][key];
        }
    });
}

// Escuchar el click en el bot칩n
toggle.addEventListener('change', () => {
    if (toggle.checked) {
        updateLanguage('en'); // Si est치 marcado -> Ingl칠s
    } else {
        updateLanguage('es'); // Si no -> Espa침ol
    }
});

/* --- CREACI칍N DE P칄TALOS --- */
function crearPetalo() {
    // Si el usuario no est치 viendo la pesta침a, no creamos p칠talos
    if (document.hidden) return;

    // Crear un nuevo div para el p칠talo
    const p = document.createElement('div');
    p.classList.add('petalo');

    // Tama침o aleatorio para dar variedad (entre 6px y 16px de ancho)
    const size = Math.random() * 10 + 6;
    p.style.width = size + 'px'; 
    p.style.height = (size * 1.4) + 'px';

    // Posici칩n inicial aleatoria (nacen en la parte superior)
    let left = Math.random() * (window.innerWidth * 1.5);
    let top = -30;
    let angulo = 0;

    // Aplicar la posici칩n inicial
    p.style.left = left + 'px';
    p.style.top = top + 'px';

    // A침adir el p칠talo al cuerpo del documento
    document.body.appendChild(p);

    // Funci칩n para animar la ca칤da del p칠talo
    function caer() {
        top += 1.5;         // Velocidad de bajada
        left -= 1.2;        // Empuje del viento hacia la izquierda
        angulo += 0.05;     // Balanceo

        // Actualizar la posici칩n del p칠talo
        p.style.top = top + 'px';
        // Combinar la posici칩n diagonal con el balanceo del seno
        p.style.left = (left + Math.sin(angulo) * 20) + 'px';

        // Rotaci칩n elegante mientras cae
        p.style.transform = `rotate(${top * 0.5}deg)`;
        
        // Si el p칠talo se sale de la pantalla, se borra
        if (top < window.innerHeight && left > -20) {
            requestAnimationFrame(caer);
        } else {
            p.remove();
        }
    }
    // Iniciar la animaci칩n de ca칤da
    caer();
}

/* --- ANIMACI칍N DE ESTRELLAS EN EL FONDO --- */
const canvas = document.getElementById('bg-canvas');
// Configuraci칩n inicial del canvas y creaci칩n de estrellas
const ctx = canvas.getContext('2d');
// Ajustamos el tama침o del canvas al tama침o inicial de la ventana
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
// Creamos un array de estrellas con posiciones, tama침os y velocidades aleatorias
let stars = Array(80).fill().map(() => ({
    x: Math.random() * canvas.width, y: Math.random() * canvas.height,
    size: Math.random() * 2, speed: Math.random() * 0.3
}));

// Funci칩n para animar las estrellas
function animateStars() {
    // Limpiar el dibujo anterior para pintar el nuevo (para crear el movimiento)
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // El color de las estrellas
    ctx.fillStyle = '#b100e8';
    stars.forEach(s => {
        ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI*2); ctx.fill();

        // Las estrellas suben un poquito en cada paso (seg칰n su velocidad)
        s.y -= s.speed; 
        
        // Si una estrella se sale por arriba, la mandamos abajo para que vuelva a empezar
        if(s.y < 0) s.y = canvas.height;
    });
    // El navegador que vuelve a ejecutar esta funci칩n lo m치s r치pido posible
    requestAnimationFrame(animateStars);
}

// Inicio de la animaci칩n de estrellas y creaci칩n de p칠talos cada 400ms
animateStars();
setInterval(crearPetalo, 400);

// Ajustar canvas si se cambia el tama침o de ventana
window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

/* --- L칍GICA DEL GATO DEL HEADER --- */
function despertar() {
    // Seleccionamos el gato y el bocadillo
    const gato = document.getElementById('gato-pixel');
    const bocadillo = document.getElementById('bocadillo-header');

    // Si el gato ya est치 despierto, no hacemos nada m치s
    if (gato.classList.contains('despierto')) return;

    // Marcamos que ya se despert칩 para que no repita la animaci칩n si se le dan muchos clicks
    gato.classList.add('despierto');

    // Aqu칤 est치n las fotos del gato en orden: de ojos cerrados a ojos abiertos
    const frames = [
        'images/gatoSleeping1.png',
        'images/gatoSleeping2.png',
        'images/gatoSleeping3.png',
        'images/gatoSleeping4.png'
    ];

    let i = 0;
    // Cambiamos la foto cada 150 milisegundos para que simule el movimiento natural
    const abrirOjos = setInterval(() => {
        i++;
        if (i < frames.length) {
            gato.style.backgroundImage = `url('${frames[i]}')`;
        } else {
            // Cuando termina de abrir los ojos, espera 2 segundos y se vuelve a dormir
            clearInterval(abrirOjos);
            mostrarBocadillo(bocadillo, ["!!!", "....", "Zzz..."]);
            
            setTimeout(() => {
                // Ocultamos el bocadillo antes de cerrar los ojos
                bocadillo.style.display = 'none';
                cerrarOjos(gato, frames);
            }, 2000);
        }
    }, 150);
}

// Funci칩n para cerrar los ojos del gato (animaci칩n inversa)
function cerrarOjos(gato, frames) {
    let i = frames.length - 1;
    const animarCierre = setInterval(() => {
        i--;
        if (i >= 0) {
            gato.style.backgroundImage = `url('${frames[i]}')`;
        } else {
            clearInterval(animarCierre);
            gato.classList.remove('despierto');
        }
    }, 150);
}

/* --- L칍GICA DEL BOCADILLO DEL GATO DEL HEADER --- */
function mostrarBocadillo(elemento, frases) {
    // Elegimos una frase aleatoria del array de frases
    elemento.innerText = frases[Math.floor(Math.random() * frases.length)];

    // Mostramos el bocadillo)
    elemento.style.display = 'block';
}

/* --- L칍GICA DE LAS SECCIONES --- */
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        // Si la secci칩n entra en el visor, le a침ade la clase 'visible'
        if (entry.isIntersecting) entry.target.classList.add('visible');
    });
}, 
// Se activa cuando se ve el 15% de la secci칩n
{ threshold: 0.15 });

// Observamos cada secci칩n del documento para aplicar la animaci칩n cuando entren en el visor
document.querySelectorAll('section').forEach(section => observer.observe(section));
